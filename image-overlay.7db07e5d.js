parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"kT6y":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function c(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDescription=exports.getDescriptionByAttr=exports.DescriptionAttribute=exports.fetchElement=void 0;const e=(...t)=>e=>!(e instanceof HTMLElement)||!t.some(t=>t.toUpperCase()===e.tagName.toUpperCase()),n=(t,e)=>t&&e.some(e=>e(t))?t:null;var r;exports.fetchElement=((r,o,i=[e("script","style")])=>t(void 0,void 0,void 0,function*(){const t=new Request(r),{hash:e,origin:s,pathname:c}=new URL(t.url);if(s+c===window.location.origin+window.location.pathname)return n(document.querySelector(e),i);const u=yield fetch(t,o);if(200===u.status){const t=yield u.text(),r=(new DOMParser).parseFromString(t,"text/html");if(e)return n(document.querySelector(e),i);if(null===r.body.firstChild)return null;const o=new DocumentFragment;return Array.from(r.body.childNodes).forEach(t=>{i.some(e=>e(t))&&o.append(t)}),o}return null})),function(t){t.ARIA_DETAILS="aria-details",t.ARIA_DESCRIBEDBY="aria-describedby",t.LONGDESC="longdesc"}(r=exports.DescriptionAttribute||(exports.DescriptionAttribute={})),exports.getDescriptionByAttr=((e,n)=>t(void 0,void 0,void 0,function*(){const t=e.getAttribute(n);if(!e.hasAttribute(n)||!t)return null;if(n===r.LONGDESC){const e=yield exports.fetchElement(t);if(e instanceof DocumentFragment){const t=document.createElement("div");return t.append(e),t}return e}const o=document.getElementById(t);return o?o.cloneNode(!0):null})),exports.getDescription=(e=>t(void 0,void 0,void 0,function*(){return Promise.all(Object.values(r).filter(t=>e.hasAttribute(t)).map(n=>t(void 0,void 0,void 0,function*(){return{attr:n,value:yield exports.getDescriptionByAttr(e,n)}})))}));
},{}],"kr1d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendContent=exports.getFocusable=exports.focusableSelectors=exports.createIcon=exports.icons=void 0;const e="0 0 24 24";exports.icons={details:{d:"M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z",viewBox:"0 0 24 24",source:"https://material.io/resources/icons/?icon=details&style=baseline"},close:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",viewBox:"0 0 24 24",source:"https://material.io/resources/icons/?icon=close&style=baseline"}};const t="http://www.w3.org/2000/svg";exports.createIcon=(({viewBox:e,d:o,source:n},{label:s,className:a}={})=>{const r=[["xmlns",t],["focusable","false"],["role","img"],["viewBox",e]];r.push(s?["aria-label",s]:["aria-hidden","true"]),a&&r.push(["class",a]);const i=document.createElementNS(t,"svg");r.forEach(e=>i.setAttribute(...e)),n&&i.append(document.createComment(n));const c=document.createElementNS(t,"path");return c.setAttribute("fill","currentColor"),c.setAttribute("d",o),i.append(c),i}),exports.focusableSelectors=['[contentEditable=true]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])','a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])',"dialog",'embed:not([tabindex="-1"])','iframe:not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','map[name] area[href]:not([tabindex="-1"])','object:not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','summary:not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])'],exports.getFocusable=((e=document)=>e.querySelectorAll(exports.focusableSelectors.join(","))),exports.appendContent=((e,...t)=>{t.forEach(t=>{if("string"==typeof t){const o=document.createElement("div");o.innerHTML=t,e.append(o.firstChild)}else e.append(t)})});
},{}],"AMii":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var o in t)"default"===o||r.hasOwnProperty(o)||e(r,t,o)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.srOnly=exports.setStyle=exports.noop=void 0,t(require("./description"),exports),t(require("./elements"),exports),exports.noop=(()=>{});const r=e=>Object.keys(e).reduce((t,r)=>{const o=e[r];return o?"".concat(t," ").concat(r,": ").concat(o,";"):t},"").trim();exports.setStyle=((e,t)=>{e.setAttribute("style",r(t))}),exports.srOnly=(e=>exports.setStyle(e,{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}));
},{"./description":"kT6y","./elements":"kr1d"}],"ni5T":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))(function(n,a){function r(t){try{c(s.next(t))}catch(e){a(e)}}function o(t){try{c(s.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,o)}c((s=s.apply(t,e||[])).next())})},e=this&&this.__rest||function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageDetails=void 0;const i=require("../../utilities"),s=new Set;class n{constructor(t,e){this.image=t,this.options=e,this.descriptionSection=null,this.descriptionAttribute=null,this.originalDetails=null,this.descriptionAdded=!1,this.originalImage=this.image.cloneNode(!0),this.image.classList.add(this.getClass("image")),this.container=this.createContainer(),this.details=this.createDetails(),this.container.append(this.image,this.details),s.add(this)}get hasDescription(){return Object.values(i.DescriptionAttribute).some(t=>this.image.getAttribute(t))}addDescription(e){return t(this,void 0,void 0,function*(){if(this.descriptionAdded)return;const{descriptionHeading:t,onGetDescription:s=i.noop}=this.options;if(e)this.description=e;else{const t=yield i.getDescription(this.image);if(s.call(this,t),t.length){const[{attr:e,value:i}]=t;this.descriptionAttribute=e,this.description=i}}this.description&&this.descriptionSection&&(i.appendContent(this.descriptionSection,t(),this.description),this.descriptionAdded=!0)})}destroy(){if((this.container.parentNode||document).insertBefore(this.originalImage,this.container),this.originalDetails){const{detailsPlacement:t}=this.options,e="after-image"===t?this.originalImage.nextSibling:this.originalImage;(this.originalImage.parentNode||document).insertBefore(this.originalDetails,e)}return this.container.remove(),s.delete(this),this}createContainer(){if(this.container)return this.container;const{blockName:t}=this.options,{parentElement:e}=this.image,i=e instanceof HTMLElement&&e.classList.contains(t)?e:document.createElement("div");return i.classList.add(t),i.contains(this.image)?i:((e||document).insertBefore(i,this.image),i)}createDetails(){if(this.details)return this.details;const{detailsPlacement:t}=this.options;let e=document.createElement("details");const i="after-image"===t?this.image.nextElementSibling:this.image.previousElementSibling;if(i instanceof HTMLDetailsElement)this.originalDetails=i.cloneNode(!0),e=i;else{const i="after-image"===t?this.image.nextSibling:this.image;(this.image.parentNode||document).insertBefore(e,i),this.summary=this.createSummary(),e.prepend(this.summary),this.marker=this.createMarker(),this.summary.prepend(this.marker),this.contents=this.createContents(),e.append(this.contents)}return e.classList.add(this.getClass("details")),e}createSummary(){const{displaySummaryText:t,summaryText:e}=this.options,s=document.createElement("summary");s.classList.add(this.getClass("summary"));const n=e(this.hasDescription),a=document.createElement("span");return i.appendContent(a,n),t||i.srOnly(a),s.append(a),s}createMarker(){const{summaryMarker:t}=this.options,e=t(),i=document.createElement("span");return i.classList.add(this.getClass("marker")),e&&i.append(e),i}createContents(){const{addAltText:t}=this.options,e=document.createElement("div");return e.classList.add(this.getClass("contents")),t&&e.append(this.createAltSection()),e.append(this.createDescriptionSection()),e}createAltSection(){const{altSectionHeading:t}=this.options,e=document.createElement("section");return e.classList.add(this.getClass("alt")),e.setAttribute("aria-hidden","true"),i.appendContent(e,t(),"<p>".concat(this.image.alt,"</p>")),e}createDescriptionSection(){const t=document.createElement("section");return t.classList.add(this.getClass("desc")),this.descriptionSection=t,t}getClass(t,e=!1){const{blockName:i}=this.options,s="".concat(i,"__").concat(t);return e?".".concat(s):s}static enhance(e,s){return t(this,void 0,void 0,function*(){const t=Object.assign(Object.assign({},n.defaultOptions),s);if(!Object.values(i.DescriptionAttribute).some(t=>e.getAttribute(t))&&!e.alt)return null;const a=new n(e,t);return yield a.addDescription(),a})}static enhanceAll(i={}){var{selector:s="img"}=i,a=e(i,["selector"]);return t(this,void 0,void 0,function*(){return yield Promise.all(Array.from(document.querySelectorAll(s)).map(e=>t(this,void 0,void 0,function*(){return n.enhance(e,a)}))),n.instances})}static get instances(){return Array.from(s)}}exports.ImageDetails=n,n.baseName="image-details",n.defaultOptions={addAltText:!0,detailsPlacement:"after-image",displaySummaryText:!0,closeOnEscape:!0,altSectionHeading:()=>"<h2>Alt Text</h2>",descriptionHeading:()=>"<h2>Image Description</h2>",summaryMarker:()=>null,summaryText:t=>{let e="Description";return t||(e+=" (only alt text)"),e},blockName:"image-details",onGetDescription:i.noop};
},{"../../utilities":"AMii"}],"IrGc":[function(require,module,exports) {
"use strict";var e=this&&this.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(o[s[i]]=e[s[i]])}return o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDraggable=exports.Draggable=void 0;const t=require("../../utilities");class o{constructor(e,s,i){this.el=e,this.keyboardEl=s,this.moveX=0,this.moveY=0,this.canGrab=!1,this.grabbed=!1,this.grab=(e=>{this.canGrab&&(this.moveX=e.clientX,this.moveY=e.clientY,this.grabbed=!0,this.options.onGrab())}),this.release=(()=>{this.moveX=0,this.moveY=0,this.grabbed=!1,this.options.onRelease()}),this.drag=(({clientX:e,clientY:t})=>{this.move(e-this.moveX,t-this.moveY),this.moveX=e,this.moveY=t,this.options.onDrag()}),this.pointermove=(e=>{if(this.grabbed)this.drag(e);else{const{excludedElements:o,excludeFocusable:s}=this.options,i=[..."function"==typeof o?o(this.el):o,...s?Array.from(t.getFocusable(this.el)):[]].filter(t=>t&&e.composedPath().includes(t));this.canGrab=!i.some(Boolean)}}),this.moveWithKeyboard=(e=>{const t=1*(e.shiftKey?20:1);let o=0,s=0;switch(e.key){case"ArrowRight":o=5;break;case"ArrowLeft":o=-5;break;case"ArrowDown":s=5;break;case"ArrowUp":s=-5;break;case"Home":return e.preventDefault(),void this.resetPosition();default:return}e.preventDefault(),this.move(o*t,s*t)}),this.options=Object.assign(Object.assign({},o.defaultOptions),i),this.el.addEventListener("pointerdown",this.grab),this.el.addEventListener("pointerleave",this.release),this.el.addEventListener("pointermove",this.pointermove),this.el.addEventListener("pointerup",this.release),this.keyboardEl&&this.keyboardEl.addEventListener("keydown",this.moveWithKeyboard)}move(e,o){const{top:s,left:i}=this.pos;null!==s&&null!==i&&t.setStyle(this.el,{position:"absolute",left:"".concat(i+e,"px"),top:"".concat(s+o,"px")}),this.options.onMove()}resetPosition(){t.setStyle(this.el,{position:null,top:null,left:null})}get pos(){const{top:e="0",left:t="0"}=window.getComputedStyle(this.el);return{top:"auto"===e?null:parseInt(e,10),left:"auto"===e?null:parseInt(t,10)}}static makeDraggable(t){var{el:s,keyboardEl:i}=t,r=e(t,["el","keyboardEl"]);return new o(s,i,r)}}exports.Draggable=o,o.defaultOptions={excludedElements:[],excludeFocusable:!0,onDrag:t.noop,onGrab:t.noop,onMove:t.noop,onRelease:t.noop},exports.makeDraggable=o.makeDraggable;
},{"../../utilities":"AMii"}],"tPG0":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))(function(n,a){function r(e){try{l(i.next(e))}catch(t){a(t)}}function o(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,o)}l((i=i.apply(e,t||[])).next())})},t=this&&this.__rest||function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(s[i[n]]=e[i[n]])}return s};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageOverlay=void 0;const s=require("../ImageDetails"),i=require("../../utilities"),n=require("./draggable"),a=new Set;class r{constructor(e,t){this.image=e,this.options=t,this.enabled=!1,this.ImageDetails=null,this.onToggle=(()=>{if(!this.ImageDetails)return;const{draggableClass:e,resizableClass:t}=this.options,{details:s,marker:n}=this.ImageDetails;s.open?(s.classList.add(e),s.classList.add(t),n.innerHTML=i.createIcon(i.icons.close).outerHTML):(s.classList.remove(e),s.classList.remove(t),s.removeAttribute("style"),n.innerHTML=i.createIcon(i.icons.details).outerHTML)}),this.onDocumentKeydown=(e=>{if(!this.ImageDetails||"Escape"!==e.key)return;const{closeAllOnEscape:t}=this.options,{details:s}=this.ImageDetails;t&&s.removeAttribute("open")}),a.add(this)}enable(){return e(this,void 0,void 0,function*(){if(this.enabled)return;if(this.ImageDetails=yield s.ImageDetails.enhance(this.image,{blockName:"overlaid",displaySummaryText:!1,summaryMarker:()=>i.createIcon(i.icons.details),onGetDescription:this.options.onGetDescription}),!this.ImageDetails)return;const{details:e,summary:t}=this.ImageDetails,{draggingClass:a}=this.options;n.makeDraggable({el:e,keyboardEl:t,onDrag:()=>{e.classList.add(a)},onRelease:()=>{e.classList.remove(a)}}),e.addEventListener("toggle",this.onToggle),document.addEventListener("keydown",this.onDocumentKeydown),this.enabled=!0})}disable(){if(!this.enabled||!this.ImageDetails)return this;const{details:e}=this.ImageDetails;return e.removeEventListener("toggle",this.onToggle),document.removeEventListener("keydown",this.onDocumentKeydown),this.enabled=!1,this}destroy(){return this.enabled&&this.disable(),this.ImageDetails&&this.ImageDetails.destroy(),a.delete(this),this}get isOpen(){return!!this.ImageDetails&&this.ImageDetails.details.open}static enhance(t,s){return e(this,void 0,void 0,function*(){const e=Object.assign(Object.assign({},r.defaultOptions),s);if(!Object.values(i.DescriptionAttribute).some(e=>t.getAttribute(e))&&!t.alt)return null;const n=new r(t,e);return yield n.enable(),n})}static enhanceAll(s={}){var{selector:i="img"}=s,n=t(s,["selector"]);return e(this,void 0,void 0,function*(){return yield Promise.all(Array.from(document.querySelectorAll(i)).map(t=>e(this,void 0,void 0,function*(){return r.enhance(t,n)}))),r.instances})}static get instances(){return Array.from(a)}}exports.ImageOverlay=r,r.defaultOptions={closeAllOnEscape:!0,draggingClass:"dragging",draggableClass:"draggable",resizableClass:"resizable",onGetDescription:i.noop};
},{"../ImageDetails":"ni5T","../../utilities":"AMii","./draggable":"IrGc"}],"etm4":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{a(r.next(t))}catch(e){i(e)}}function c(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,c)}a((r=r.apply(t,e||[])).next())})},e=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageModal=void 0;const n=new Set;class r{constructor(t,e){this.image=t,this.options=e,n.add(this)}static get instances(){return Array.from(n)}static enhance(e,n){return t(this,void 0,void 0,function*(){const t=Object.assign(Object.assign({},r.defaultOptions),n);if(!Object.values(DescriptionAttribute).some(t=>e.getAttribute(t))&&!e.alt)return null;const o=new r(e,t);return yield o.enable(),o})}static enhanceAll(n={}){var{selector:o=r.selector}=n,i=e(n,["selector"]);return t(this,void 0,void 0,function*(){return yield Promise.all(Array.from(document.querySelectorAll(o)).map(e=>t(this,void 0,void 0,function*(){return r.enhance(e,i)}))),r.instances})}}exports.ImageModal=r,r.selector="img",r.defaultOptions={foo:""};
},{}],"fUdq":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var n in t)"default"===n||r.hasOwnProperty(n)||e(r,t,n)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./enhancements/ImageDetails"),exports),t(require("./enhancements/ImageOverlay"),exports),t(require("./enhancements/ImageModal"),exports),t(require("./utilities"),exports);
},{"./enhancements/ImageDetails":"ni5T","./enhancements/ImageOverlay":"tPG0","./enhancements/ImageModal":"etm4","./utilities":"AMii"}],"zLsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../src");e.ImageOverlay.enhanceAll({selector:".overlay",onGetDescription:console.log}).then(console.log),e.ImageDetails.enhanceAll({selector:".details",onGetDescription:console.log}).then(console.log);
},{"../../src":"fUdq"}]},{},["zLsf"], null)
//# sourceMappingURL=/image-details/image-overlay.7db07e5d.js.map
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"etm4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageModal=void 0;class e{}exports.ImageModal=e;
},{}],"kT6y":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(e){o(e)}}function c(t){try{a(r.throw(t))}catch(e){o(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,c)}a((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDescription=exports.Describer=exports.DescriptionAttribute=exports.fetchElement=void 0;const e=(...t)=>e=>!(e instanceof HTMLElement)||!t.some(t=>t.toUpperCase()===e.tagName.toUpperCase()),n=(t,e)=>t&&e.some(e=>e(t))?t:null;var r;exports.fetchElement=((r,i,o=[e("script","style")])=>t(void 0,void 0,void 0,function*(){const t=new Request(r),{hash:e,origin:s,pathname:c}=new URL(t.url);if(s+c===window.location.origin+window.location.pathname)return n(document.querySelector(e),o);const a=yield fetch(t,i);if(200===a.status){const t=yield a.text(),r=(new DOMParser).parseFromString(t,"text/html");if(e)return n(document.querySelector(e),o);if(null===r.body.firstChild)return null;const i=new DocumentFragment;return Array.from(r.body.childNodes).forEach(t=>{o.some(e=>e(t))&&i.append(t)}),i}return null})),function(t){t.ARIA_DETAILS="aria-details",t.ARIA_DESCRIBEDBY="aria-describedby",t.LONGDESC="longdesc"}(r=exports.DescriptionAttribute||(exports.DescriptionAttribute={}));class i{constructor(e){switch(this.attr=e,e){case r.ARIA_DETAILS:case r.ARIA_DESCRIBEDBY:this.parser=(e=>t(this,void 0,void 0,function*(){const t=document.getElementById(e);return t?t.cloneNode(!0):null}));break;case r.LONGDESC:this.parser=(e=>t(this,void 0,void 0,function*(){const t=yield exports.fetchElement(e);if(t instanceof DocumentFragment){const e=document.createElement("div");return e.append(t),e}return t}));break;default:throw new Error("".concat(e," is not a valid descriptions attribute."))}}getDescription(e){return t(this,void 0,void 0,function*(){const t=e.getAttribute(this.attr);return t?this.parser(t):Promise.resolve(null)})}static get(e,n){return t(this,void 0,void 0,function*(){return new i(n).getDescription(e)})}}exports.Describer=i,exports.getDescription=(e=>t(void 0,void 0,void 0,function*(){let t=null,n=yield i.get(e,r.ARIA_DETAILS);return n&&(t=r.ARIA_DETAILS),t||(n=yield i.get(e,r.LONGDESC))&&(t=r.LONGDESC),t||(n=yield i.get(e,r.ARIA_DESCRIBEDBY))&&(t=r.ARIA_DESCRIBEDBY),{attr:t,desc:n}}));
},{}],"kr1d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFocusable=exports.focusableSelectors=exports.createIcon=exports.icons=void 0;const e="0 0 24 24";exports.icons={details:{d:"M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z",viewBox:"0 0 24 24",source:"https://material.io/resources/icons/?icon=details&style=baseline"},close:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",viewBox:"0 0 24 24",source:"https://material.io/resources/icons/?icon=close&style=baseline"}};const t="http://www.w3.org/2000/svg";exports.createIcon=(({viewBox:e,d:o,source:s},{label:n,className:a}={})=>{const r=[["xmlns",t],["focusable","false"],["role","img"],["viewBox",e]];r.push(n?["aria-label",n]:["aria-hidden","true"]),a&&r.push(["class",a]);const i=document.createElementNS(t,"svg");r.forEach(e=>i.setAttribute(...e)),s&&i.append(document.createComment(s));const c=document.createElementNS(t,"path");return c.setAttribute("fill","currentColor"),c.setAttribute("d",o),i.append(c),i}),exports.focusableSelectors=['[contentEditable=true]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])','a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])',"dialog",'embed:not([tabindex="-1"])','iframe:not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','map[name] area[href]:not([tabindex="-1"])','object:not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','summary:not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])'],exports.getFocusable=((e=document)=>e.querySelectorAll(exports.focusableSelectors.join(",")));
},{}],"j3te":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noop=exports.setStyle=void 0;const t=t=>Object.keys(t).reduce((e,o)=>{const s=t[o];return s?"".concat(e," ").concat(o,": ").concat(s,";"):e},"").trim();exports.setStyle=((e,o)=>{e.setAttribute("style",t(o))}),exports.noop=(()=>{});
},{}],"IrGc":[function(require,module,exports) {
"use strict";var e=this&&this.__rest||function(e,t){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(o[s[i]]=e[s[i]])}return o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeDraggable=exports.Draggable=void 0;const t=require("../../utilities/elements"),o=require("../../utilities/misc");class s{constructor(e,o,i){this.el=e,this.keyboardEl=o,this.moveX=0,this.moveY=0,this.canGrab=!1,this.grabbed=!1,this.grab=(e=>{this.canGrab&&(this.moveX=e.clientX,this.moveY=e.clientY,this.grabbed=!0,this.options.onGrab())}),this.release=(()=>{this.moveX=0,this.moveY=0,this.grabbed=!1,this.options.onRelease()}),this.drag=(({clientX:e,clientY:t})=>{this.move(e-this.moveX,t-this.moveY),this.moveX=e,this.moveY=t,this.options.onDrag()}),this.pointermove=(e=>{if(this.grabbed)this.drag(e);else{const{excludedElements:o,excludeFocusable:s}=this.options,i=[..."function"==typeof o?o(this.el):o,...s?Array.from(t.getFocusable(this.el)):[]].filter(t=>t&&e.composedPath().includes(t));this.canGrab=!i.some(Boolean)}}),this.moveWithKeyboard=(e=>{const t=1*(e.shiftKey?20:1);let o=0,s=0;switch(e.key){case"ArrowRight":o=5;break;case"ArrowLeft":o=-5;break;case"ArrowDown":s=5;break;case"ArrowUp":s=-5;break;case"Home":return e.preventDefault(),void this.resetPosition();default:return}e.preventDefault(),this.move(o*t,s*t)}),this.options=Object.assign(Object.assign({},s.defaultOptions),i),this.el.addEventListener("pointerdown",this.grab),this.el.addEventListener("pointerleave",this.release),this.el.addEventListener("pointermove",this.pointermove),this.el.addEventListener("pointerup",this.release),this.keyboardEl.addEventListener("keydown",this.moveWithKeyboard)}move(e,t){const{top:s,left:i}=this.pos;null!==s&&null!==i&&o.setStyle(this.el,{position:"absolute",left:"".concat(i+e,"px"),top:"".concat(s+t,"px")}),this.options.onMove()}resetPosition(){o.setStyle(this.el,{position:null,top:null,left:null})}get pos(){const{top:e="0",left:t="0"}=window.getComputedStyle(this.el);return{top:"auto"===e?null:parseInt(e,10),left:"auto"===e?null:parseInt(t,10)}}static makeDraggable(t){var{el:o,keyboardEl:i}=t,r=e(t,["el","keyboardEl"]);return new s(o,i,r)}}exports.Draggable=s,s.defaultOptions={excludedElements:[],excludeFocusable:!0,onDrag:o.noop,onGrab:o.noop,onMove:o.noop,onRelease:o.noop},exports.makeDraggable=s.makeDraggable;
},{"../../utilities/elements":"kr1d","../../utilities/misc":"j3te"}],"tPG0":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))(function(a,n){function r(e){try{c(i.next(e))}catch(t){n(t)}}function o(e){try{c(i.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,o)}c((i=i.apply(e,t||[])).next())})},t=this&&this.__rest||function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageOverlay=void 0;const s=require("../../utilities/description"),i=require("../../utilities/elements"),a=require("./draggable"),n=new Set;class r{constructor(e,t){this.enabled=!1,this.onToggle=(()=>{const{draggable:e,resizable:t}=this.options;this.details.open?(this.details.classList.add(e),this.details.classList.add(t)):(this.details.classList.remove(e),this.details.classList.remove(t),this.details.removeAttribute("style")),this.updateMarker()}),this.onDocumentKeydown=(e=>{if("Escape"!==e.key)return;const{closeOnEscape:t}=this.options;t&&(this.details.open=!1)}),this.image=e,this.options=t,n.add(this)}enable(){return e(this,void 0,void 0,function*(){if(this.enabled)return;this.originalImage=this.image.cloneNode();const{attr:e,desc:t}=yield s.getDescription(this.image);this.descriptionAttribute=e,this.description=t;const{image:i,dragging:n}=this.options;this.image.classList.add(i),this.overlay=this.createOverlay(),this.details=this.createDetails(),this.summary=this.createSummary(),this.marker=this.createMarker(),this.contents=this.createContents(this.details),a.makeDraggable({el:this.details,keyboardEl:this.summary,onDrag:()=>{this.details.classList.add(n)},onRelease:()=>{this.details.classList.remove(n)}}),this.details.addEventListener("toggle",this.onToggle),document.addEventListener("keydown",this.onDocumentKeydown),this.enabled=!0})}disable(){return this.enabled?(this.details.removeEventListener("toggle",this.onToggle),document.removeEventListener("keydown",this.onDocumentKeydown),this.enabled=!1,this):this}destroy(){return this.enabled&&this.disable(),(this.overlay.parentNode||document).insertBefore(this.originalImage,this.overlay),this.overlay.remove(),n.delete(this),this}createOverlay(){if(this.overlay&&this.overlay instanceof HTMLElement)return this.overlay;const{overlay:e}=this.options,{parentElement:t}=this.image,s=t instanceof HTMLElement&&t.classList.contains(e)?t:document.createElement("div");return s.classList.add(e),s.contains(this.image)?s:((t||document).insertBefore(s,this.image),s.append(this.image),s)}createDetails(){if(this.details instanceof HTMLDetailsElement)return this.details;const{detailsPlacement:e,screenReaderOnly:t,details:s}=this.options;this.description&&(this.description,HTMLDetailsElement,t&&this.description.classList.contains(t)&&this.description.classList.remove(t));const{nextElementSibling:i}=this.image;if(i&&i instanceof HTMLDetailsElement&&this.description&&(i===this.description||i.contains(this.description)))return i.classList.add(s),i;const a=document.createElement("details");a.classList.add(s);const n="after-image"===e?this.image.nextSibling:this.image;return(this.image.parentNode||document).insertBefore(a,n),a}createSummary(){const{summary:e,displaySummaryText:t,summaryText:s}=this.options,i=this.details.querySelector("summary");if(i)return i.classList.add(e),i;const a=document.createElement("summary");a.classList.add(e);const n="string"==typeof s?s:s(Boolean(this.description));return t?a.append(n):(a.setAttribute("aria-label",n),a.setAttribute("title",n)),this.details.prepend(a),a}createMarker(){const{marker:e}=this.options,t=document.createElement("span");return t.classList.add(e),this.summary.prepend(this.updateMarker(t)),t}updateMarker(e=this.marker){const{summaryMarker:t}=this.options;if("object"==typeof t&&"open"in t){for(;e.firstChild;)e.firstChild.remove();const{open:s,closed:i}=t;return e.append(this.details.open?s:i),e}return e.children.length||e.append(t),e}createContents(e){const{addAltText:t,contents:s}=this.options,i=document.createElement("div");i.classList.add(s);const a=this.createDescSection();return t&&i.append(this.createAltSection()),a&&i.append(a),e.append(i),i}createAltSection(){const{altText:e,altSectionHeading:t}=this.options,s=document.createElement("section");return s.classList.add(e),s.setAttribute("aria-hidden","true"),s.innerHTML="".concat(t,"<p>").concat(this.image.alt,"</p>"),s}createDescSection(){if(!this.description)return null;const{descriptionHeading:e,description:t}=this.options,s=document.createElement("section");return s.classList.add(t),s.innerHTML=e,s.append(this.description),s}static enhance(t,i){return e(this,void 0,void 0,function*(){const e=Object.assign(Object.assign(Object.assign({},r.defaultOptions),r.defaultClasses),i);if(!Object.values(s.DescriptionAttribute).some(e=>t.getAttribute(e))&&!t.alt)return null;const a=new r(t,e);return yield a.enable(),a})}static enhanceAll(s={}){var{selector:i=r.selector}=s,a=t(s,["selector"]);return e(this,void 0,void 0,function*(){return yield Promise.all(Array.from(document.querySelectorAll(i)).map(t=>e(this,void 0,void 0,function*(){return r.enhance(t,a)}))),r.instances})}static get instances(){return Array.from(n)}}exports.ImageOverlay=r,r.selector="img",r.baseName="overlaid",r.defaultClasses={overlay:r.baseName,image:"".concat(r.baseName,"__image"),details:"".concat(r.baseName,"__details"),summary:"".concat(r.baseName,"__summary"),marker:"".concat(r.baseName,"__marker"),contents:"".concat(r.baseName,"__contents"),altText:"".concat(r.baseName,"__alt"),description:"".concat(r.baseName,"__desc"),draggable:"".concat(r.baseName,"--draggable"),resizable:"".concat(r.baseName,"--resizable"),dragging:"dragging",screenReaderOnly:"sr-only"},r.defaultOptions={addAltText:!0,altSectionHeading:"<h2>Alt Text</h2>",descriptionHeading:"<h2>Image Description</h2>",detailsPlacement:"after-image",get summaryMarker(){return{open:i.createIcon(i.icons.close),closed:i.createIcon(i.icons.details)}},summaryText:e=>{let t="Description";return e||(t+=" (Only alt text)"),t},displaySummaryText:!1,closeOnEscape:!0};
},{"../../utilities/description":"kT6y","../../utilities/elements":"kr1d","./draggable":"IrGc"}],"fUdq":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var n in t)"default"===n||r.hasOwnProperty(n)||e(r,t,n)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./enhancements/ImageModal"),exports),t(require("./enhancements/ImageOverlay"),exports);
},{"./enhancements/ImageModal":"etm4","./enhancements/ImageOverlay":"tPG0"}],"zLsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../src");e.ImageOverlay.enhanceAll().then(console.log);
},{"../../src":"fUdq"}]},{},["zLsf"], null)
//# sourceMappingURL=/image-details/image-overlay.33510358.js.map